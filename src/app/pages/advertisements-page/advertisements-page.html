<app-search (searchValue)="onSearch($event)" ></app-search>

<div class="adv">
  <div class="page-container">

    <div class="categories-tree">

      <h2>Категории:</h2>

      <div
        role="tree"
        [tuiTreeController]="true"
      >
        <app-category-tree
          [categories]="categories"
          (toCategory)="setCategory($event)"
        ></app-category-tree>

      </div>
    </div>





      <div class="cards-container">

        <div class="cards-block">

          <app-navigation
            [categoryId]="currentCategory"
          ></app-navigation>

          <div class="sort">
            Сортировка:

            <button
              appearance="positive"
              size="s"
              tuiIconButton
              tuiButton
              tuiChevron
              type="button"
              [tuiDropdown]="dropdownContentProfile"
              [tuiDropdownManual]="openProfile"
              [tuiObscuredEnabled]="openProfile"
              (click)="onClickProfile ()"
              (tuiActiveZoneChange)="onActiveZoneProfile($event)"
              (tuiObscured)="onObscuredProfile($event)"
            >
              По цене
              <ng-template #dropdownContentProfile>
                <div class="dropdown-buttons">
                  <button
                    class="profile-button"
                    appearance="flat-grayscale"
                    tuiButton
                    type="button"
                    size="s"
                    (click)="toDorogo()"
                  >
                    Подороже
                  </button>

                  <button
                    class="profile-button"
                    appearance="flat-grayscale"
                    tuiButton
                    type="button"
                    size="s"
                    (click)="toDeshevo()"
                  >
                    Подешевле
                  </button>

                </div>
              </ng-template>

            </button>
          </div>


        @if (newAdverticements.length > 0) {
          <div class="cards-container">
            @for (ad of newAdverticements; track ad.id) {
              <div
                class="adv-container">

                <app-adverticement-card
                  [advertisement]="ad"
                  [favouriteAdvertisements]="favouriteAdvertisements"
                />
              </div>
            }
          </div>
        } @else {
          <div class="cards-container">
            <h1>Нет объявлений(((</h1>
          </div>
        }
      </div>
    </div>


  </div>
</div>

<tui-pagination class="pagination"
  [index]="index"
  [length]="length"
  (indexChange)="goToPage($event)"
/>
